#!/usr/bin/with-contenv bash

set -euo pipefail
export BCG_E=`basename ${0}`


#======================================================================================================================
# Execute WordPress cron
# See https://developer.wordpress.org/plugins/cron/hooking-wp-cron-into-the-system-task-scheduler/
#======================================================================================================================

bcg-echo "Executing WordPress cron."
CODE=$(wget --spider -S "http://localhost/wp-cron.php" 2>&1 | grep "HTTP/" | awk '{print $2}')
if [ "${CODE}" = "200" ] ; then
    bcg-debug "Success."
else
    bcg-error "Unable to execute cron."
fi
